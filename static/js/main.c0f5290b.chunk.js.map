{"version":3,"sources":["components/Header.js","components/postFunctions.js","components/Post.js","components/Feed.js","components/Favorites.js","components/App.js","index.js"],"names":["Header","props","className","id","onClick","toggleTab","value","subreddit","favoritesCount","formatUrl","permalink","formatUsername","author","toLowerCase","setFavoriteButtonText","favoriteAction","document","lazyLoadInstance","LazyLoad","Post","update","time","url","this","title","upvotes","posted","handleFavorite","isFavorited","image","favoriteIcon","favoriteButtonClass","key","role","aria-label","data-src","replace","alt","href","target","rel","moment","Date","toLocaleString","fromNow","React","Component","Feed","favoriteIDs","favoritesData","map","favorite","data","posts","feedData","post","ups","created_utc","preview","some","favoriteID","images","resolutions","Favorites","length","App","checkStorage","JSON","parse","localStorage","getItem","setState","fetchData","fetch","state","then","res","json","children","filter","undefined","imageCheck","catch","console","log","e","newActive","active","buttons","getElementsByClassName","classList","remove","getElementById","add","addFavorite","toSave","alreadySaved","savedData","find","item","storeFavorites","removeFavorite","toRemove","filteredData","setItem","stringify","ReactDOM","render"],"mappings":"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","file":"static/js/main.c0f5290b.chunk.js","sourcesContent":["import React from 'react';\n\nexport default function Header(props) {\n  return (\n    <header>\n      <button className=\"header-button feed-toggle active\" id=\"feed\" onClick={props.toggleTab} value=\"feed\">\n        <i className=\"icon fab fa-reddit-alien\"></i> /r/{props.subreddit}\n      </button>\n\n      <button className=\"header-button favorites-toggle\" id=\"favorites\" onClick={props.toggleTab} value=\"favorites\">\n        <i className=\"icon fas fa-heart\"></i> favorites ({props.favoritesCount})\n      </button>\n    </header>\n  );\n}","import moment from \"moment\";\n\nexport function formatUrl(permalink) {\n  return `https://www.reddit.com/${permalink}`;\n};\n\nexport function formatUsername(author) {\n  return `/u/${author}`.toLowerCase();\n};\n\nexport function getTimeAgo(time) {\n  return moment(new Date(time * 1000).toLocaleString()).fromNow();\n};\n\nexport function setFavoriteButtonText(favoriteAction) {\n  return (favoriteAction === 'Add') ? `${favoriteAction} to Favorites` : `${favoriteAction} from Favorites`;\n};\n\nexport function decodeImgUrl(url) {\n  return url.replace(/&amp;/g, '&');\n};","import React from \"react\";\nimport { formatUrl, formatUsername, getTimeAgo, setFavoriteButtonText, decodeImgUrl } from \"./postFunctions.js\";\nimport LazyLoad from \"vanilla-lazyload\";\n\nif (!document.lazyLoadInstance) {\n  document.lazyLoadInstance = new LazyLoad('.lazy');\n}\n\nexport default class Post extends React.Component {\n  componentDidMount() {\n    document.lazyLoadInstance.update();\n  };\n\n  componentDidUpdate() {\n    document.lazyLoadInstance.update();\n  };\n\n  render() {\n    const { id, title, permalink, author, upvotes, posted, handleFavorite, favoriteAction, isFavorited, image } = this.props;\n    let favoriteIcon = favoriteAction === \"Add\" ? \"icon fas fa-heart\" : \"fas fa-trash-alt\";\n    let favoriteButtonClass = isFavorited ? \"favorite-button active\" : \"favorite-button\";\n\n    return (\n      <div className=\"post\" key={id} id={id}>\n        <div className=\"image-wrapper\">\n          <button className={favoriteButtonClass} onClick={() => handleFavorite(id)}>\n            <i className={favoriteIcon} role=\"presentation\" aria-label={setFavoriteButtonText(favoriteAction)}></i>\n          </button>\n          <img className=\"image lazy\" data-src={decodeImgUrl(image)} alt={`${formatUsername(author)}'s makeup look`} />\n        </div>\n        <a className=\"link\" href={formatUrl(permalink)} target=\"_blank\" rel=\"noopener noreferrer\">\n          <h2 className=\"title\">{title}</h2>\n        </a>\n        <div className=\"post-info\">\n          <span className=\"group author\">\n            <i className=\"icon fas fa-user\"></i>\n            {formatUsername(author)}\n          </span>\n\n          <span className=\"group posted\">\n            <span className=\"spacer\">•</span>\n            <a className=\"link\" href={formatUrl(permalink)} target=\"_blank\" rel=\"noopener noreferrer\">\n              <i className=\"icon far fa-clock\"></i>\n              {getTimeAgo(posted)}\n            </a>\n          </span>\n\n          <span className=\"group upvotes\">\n            <span className=\"spacer\">•</span>\n            <i className=\"icon fas fa-bolt\"></i>\n            {upvotes}\n          </span>\n        </div>\n      </div>\n    );\n  };\n};","import React from \"react\";\nimport Post from \"./Post.js\";\n\nexport default function Feed(props) {\n  let favoriteIDs = props.favoritesData.map(favorite => favorite.data.id);\n\n  const posts = props.feedData.map(post => {\n    const { id, title, permalink, author, ups, created_utc, preview } = post.data;\n    let isFavorited = favoriteIDs.some(favoriteID => favoriteID === id);\n\n    return (\n      <Post \n        key={id} \n        id={id}  \n        title={title}\n        permalink={permalink}\n        author={author} \n        upvotes={ups} \n        posted={created_utc}\n        image={preview.images[0].resolutions[3].url}\n        handleFavorite={props.handleFavorite}\n        favoriteAction={props.favoriteAction}\n        isFavorited={isFavorited}\n      />\n    );\n  });\n\n  return (\n    <main className=\"reddit-feed-container feed\">\n      <div>\n        <h1 className=\"heading\">Top posts</h1>\n\n        {posts}\n        \n        <div>\n          <span className=\"fin\">- fin -</span>\n        </div>\n      </div>\n    </main>\n  );\n}","import React from \"react\";\nimport Post from \"./Post.js\";\n\nexport default function Favorites(props) {\n  const posts = props.favoritesData.map(post => {\n    const { id, title, permalink, author, ups, created_utc, preview } = post.data;\n\n    return (\n      <Post \n        key={id} \n        id={id}  \n        title={title}\n        permalink={permalink}\n        author={author} \n        upvotes={ups} \n        posted={created_utc}\n        image={preview.images[0].resolutions[3].url}\n        handleFavorite={props.handleFavorite}\n        favoriteAction={props.favoriteAction}\n      />\n    );\n  });\n\n  if (posts.length !== 0) {\n    return (\n      <div className=\"reddit-feed-container favorites\">\n        <div>\n          <h1 className=\"heading\">Your favorites</h1>\n          {posts}\n        </div>\n      </div>\n    );\n  }\n  else {\n    return (\n      <div className=\"reddit-feed-container favorites\">\n        <div className=\"no-favorites\">\n          <p>No favorites yet.</p>\n        </div>\n      </div>\n    );\n  }\n};","import React from 'react';\nimport Header from './Header.js';\nimport Feed from './Feed.js';\nimport Favorites from './Favorites';\n\nexport default class App extends React.Component {\n  // Constructor\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      subreddit: \"makeupaddiction\",\n      active: \"feed\",\n      feedData: [],\n      favoritesData: []\n    };\n  };\n\n\n  // Runs on load\n  componentDidMount() {\n    this.checkStorage();\n    this.fetchData();\n  };\n\n  checkStorage = () => {\n    // Checks to see if the user's favorites data is saved in local storage\n    const favoritesData = JSON.parse(localStorage.getItem(\"favoritesData\"));\n\n    if (JSON.parse(localStorage.getItem(\"favoritesData\"))) {\n      this.setState({ \n        favoritesData: favoritesData\n      });\n    }\n  };\n\n  fetchData = () => {\n    fetch(`https://www.reddit.com/r/${this.state.subreddit}/top.json`)\n    .then(res => res.json())\n    .then((data) => {\n      let feedData = data.data.children.filter(post => {\n        // Only show posts that have large preview images\n        return imageCheck(post);\n      });\n\n      function imageCheck(post) {\n        if (post.data.preview !== undefined) {\n          // resolution - width: 640, height 1280\n          if (post.data.preview.images[0].resolutions[3] !== undefined) {\n            return post;\n          }\n        }\n      }\n\n      this.setState({ \n        feedData: feedData \n      });\n    })\n    .catch(console.log);\n  };\n\n\n  // Handles User Interaction\n  toggleTab = (e) => {\n    let newActive = e.target.value;\n\n    this.setState({\n      active: newActive\n    });\n\n    let buttons = document.getElementsByClassName(\"header-button\");\n\n    for (let button of buttons) {\n      button.classList.remove(\"active\")\n    }\n\n    document.getElementById(newActive).classList.add(\"active\");\n  };\n\n  addFavorite = (toSave) => {\n    const feedData = this.state.feedData;\n    const favoritesData = this.state.favoritesData;\n\n    let alreadySaved = favoritesData.some(savedData => {\n      return savedData.data.id === toSave;\n    });\n\n    let data = feedData.find((item) => {\n      return item.data.id === toSave;\n    });\n\n    if (!alreadySaved) {\n      this.setState({ \n        favoritesData: [...this.state.favoritesData, data]\n      }, this.storeFavorites);\n    };\n  };\n\n  removeFavorite = (toRemove) => {\n    const favoritesData = this.state.favoritesData;\n\n    let filteredData = favoritesData.filter(savedData => {\n      return savedData.data.id !== toRemove;\n    });\n\n    this.setState({ \n      favoritesData: filteredData \n    }, this.storeFavorites);\n  };\n\n  storeFavorites = () => {\n    localStorage.setItem('favoritesData', JSON.stringify(this.state.favoritesData));\n  };\n  \n\n  // Renders App component\n  render() {\n    const { subreddit, active, feedData, favoritesData } = this.state;\n    const { toggleTab, addFavorite, removeFavorite } = this;\n\n    return (\n      <div className=\"app reddit-feed\">\n        <Header subreddit={subreddit} toggleTab={toggleTab} favoritesCount={favoritesData.length} />\n\n        {active === \"feed\" ? ( \n          <Feed feedData={feedData} favoritesData={favoritesData} handleFavorite={addFavorite} favoriteAction=\"Add\" /> \n        ) : active === \"favorites\" ? ( \n          <Favorites favoritesData={favoritesData} handleFavorite={removeFavorite} favoriteAction=\"Remove\" /> \n        ) : null }\n      </div>\n    );\n  };\n}","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './components/App.js';\n\nReactDOM.render(<App />, document.getElementById('root'));"],"sourceRoot":""}