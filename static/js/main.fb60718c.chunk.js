(this["webpackJsonpreddit-feed"]=this["webpackJsonpreddit-feed"]||[]).push([[0],{11:function(e,t,a){e.exports=a(18)},16:function(e,t,a){},18:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),o=a(7),i=a.n(o),s=(a(16),a(10)),c=a(1),l=a(2),d=a(4),u=a(3),f=a(5);function v(e){return n.a.createElement("header",null,n.a.createElement("button",{className:"header-button feed-toggle active",id:"feed",onClick:e.toggleTab,value:"feed"},n.a.createElement("i",{className:"icon fab fa-reddit-alien"})," /r/",e.subreddit),n.a.createElement("button",{className:"header-button favorites-toggle",id:"favorites",onClick:e.toggleTab,value:"favorites"},n.a.createElement("i",{className:"icon fas fa-heart"})," favorites (",e.favoritesCount,")"))}var m=a(8),p=a.n(m);function h(e){return"https://www.reddit.com/".concat(e)}function g(e){return"/u/".concat(e).toLowerCase()}function E(e){return"".concat(e,"Add"===e?" to Favorites":" from Favorites")}var b=a(9),N=a.n(b);document.lazyLoadInstance||(document.lazyLoadInstance=new N.a(".lazy"));var k=function(e){function t(){var e,a;Object(c.a)(this,t);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return(a=Object(d.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(n)))).updatefavoriteButtonClass=function(e){a.props.handleFavorite(e)},a}return Object(f.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){document.lazyLoadInstance.update()}},{key:"componentDidUpdate",value:function(){document.lazyLoadInstance.update()}},{key:"render",value:function(){var e,t,a=this,r=this.props,o=r.id,i=r.title,s=r.permalink,c=r.author,l=r.upvotes,d=r.posted,u=(r.handleFavorite,r.favoriteAction),f=(r.isFavorited,r.image),v="Add"===u?"icon fas fa-heart":"fas fa-trash-alt",m=this.props.isFavorited?"favorite-button active":"favorite-button";return n.a.createElement("div",{className:"post",key:o,id:o},n.a.createElement("div",{className:"image-wrapper"},n.a.createElement("button",{className:m,onClick:function(){return a.updatefavoriteButtonClass(o)}},n.a.createElement("i",{className:v,role:"presentation","aria-label":E(u)})),n.a.createElement("img",{className:"image lazy","data-src":(t=f,t.replace(/&amp;/g,"&")),alt:"".concat(g(c),"'s makeup look")})),n.a.createElement("a",{className:"link",href:h(s),target:"_blank",rel:"noopener noreferrer"},n.a.createElement("h2",{className:"title"},i)),n.a.createElement("div",{className:"post-info"},n.a.createElement("span",{className:"group author"},n.a.createElement("i",{className:"icon fas fa-user"}),g(c)),n.a.createElement("span",{className:"group posted"},n.a.createElement("span",{className:"spacer"},"\u2022"),n.a.createElement("a",{className:"link",href:h(s),target:"_blank",rel:"noopener noreferrer"},n.a.createElement("i",{className:"icon far fa-clock"}),(e=d,p()(new Date(1e3*e).toLocaleString()).fromNow()))),n.a.createElement("span",{className:"group upvotes"},n.a.createElement("span",{className:"spacer"},"\u2022"),n.a.createElement("i",{className:"icon fas fa-bolt"}),l)))}}]),t}(n.a.Component);function D(e){var t=e.favoritesData.map((function(e){return e.data.id})),a=e.feedData.map((function(a){var r=a.data,o=r.id,i=r.title,s=r.permalink,c=r.author,l=r.ups,d=r.created_utc,u=r.preview,f=t.some((function(e){return e===o}));return n.a.createElement(k,{key:o,id:o,title:i,permalink:s,author:c,upvotes:l,posted:d,image:u.images[0].resolutions[3].url,handleFavorite:e.handleFavorite,favoriteAction:e.favoriteAction,isFavorited:f})}));return n.a.createElement("main",{className:"reddit-feed-container feed"},n.a.createElement("div",null,n.a.createElement("h1",{className:"heading"},"Top posts"),a,n.a.createElement("div",null,n.a.createElement("span",{className:"fin"},"- fin -"))))}function y(e){var t=e.favoritesData.map((function(t){var a=t.data,r=a.id,o=a.title,i=a.permalink,s=a.author,c=a.ups,l=a.created_utc,d=a.preview;return n.a.createElement(k,{key:r,id:r,title:o,permalink:i,author:s,upvotes:c,posted:l,image:d.images[0].resolutions[3].url,handleFavorite:e.handleFavorite,favoriteAction:e.favoriteAction})}));return 0!==t.length?n.a.createElement("div",{className:"reddit-feed-container favorites"},n.a.createElement("div",null,n.a.createElement("h1",{className:"heading"},"Your favorites"),t)):n.a.createElement("div",{className:"reddit-feed-container favorites"},n.a.createElement("div",{className:"no-favorites"},n.a.createElement("p",null,"No favorites yet.")))}var F=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(d.a)(this,Object(u.a)(t).call(this,e))).checkStorage=function(){var e=JSON.parse(localStorage.getItem("favoritesData"));JSON.parse(localStorage.getItem("favoritesData"))&&a.setState({favoritesData:e})},a.fetchData=function(){fetch("https://www.reddit.com/r/".concat(a.state.subreddit,"/top.json")).then((function(e){return e.json()})).then((function(e){var t=e.data.children.filter((function(e){return function(e){if(void 0!==e.data.preview&&void 0!==e.data.preview.images[0].resolutions[3])return e}(e)}));a.setState({feedData:t})})).catch(console.log)},a.toggleTab=function(e){var t=e.target.value;a.setState({active:t});var r=document.getElementsByClassName("header-button"),n=!0,o=!1,i=void 0;try{for(var s,c=r[Symbol.iterator]();!(n=(s=c.next()).done);n=!0){s.value.classList.remove("active")}}catch(l){o=!0,i=l}finally{try{n||null==c.return||c.return()}finally{if(o)throw i}}document.getElementById(t).classList.add("active")},a.addFavorite=function(e){var t=a.state.feedData,r=a.state.favoritesData.some((function(t){return t.data.id===e})),n=t.find((function(t){return t.data.id===e}));r||a.setState({favoritesData:[].concat(Object(s.a)(a.state.favoritesData),[n])},a.storeFavorites)},a.removeFavorite=function(e){var t=a.state.favoritesData.filter((function(t){return t.data.id!==e}));a.setState({favoritesData:t},a.storeFavorites)},a.storeFavorites=function(){localStorage.setItem("favoritesData",JSON.stringify(a.state.favoritesData))},a.state={subreddit:"makeupaddiction",active:"feed",feedData:[],favoritesData:[]},a}return Object(f.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){this.checkStorage(),this.fetchData()}},{key:"render",value:function(){var e=this.state,t=e.subreddit,a=e.active,r=e.feedData,o=e.favoritesData,i=this.toggleTab,s=this.addFavorite,c=this.removeFavorite;return n.a.createElement("div",{className:"app reddit-feed"},n.a.createElement(v,{subreddit:t,toggleTab:i,favoritesCount:o.length}),"feed"===a?n.a.createElement(D,{feedData:r,favoritesData:o,handleFavorite:s,favoriteAction:"Add"}):"favorites"===a?n.a.createElement(y,{favoritesData:o,handleFavorite:c,favoriteAction:"Remove"}):null)}}]),t}(n.a.Component);i.a.render(n.a.createElement(F,null),document.getElementById("root"))}},[[11,1,2]]]);
//# sourceMappingURL=main.fb60718c.chunk.js.map